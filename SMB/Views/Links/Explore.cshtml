@model IEnumerable<SMB.Models.Links.Topic>

@{
    ViewBag.Title = "Ссылки";
}

@Scripts.Render("~/Javascript/LinkListOpener.js")
@Styles.Render("~/Content/LinksStyle.css")
<h2>Темы и ссылки</h2>
<div class="linkContainer">
    @foreach (var topic in Model)
    {
        <br />
        <div class="linkListContainer">
            <table>
                <tr>
                    <td>
                        <a class="topicHeader" onclick="openOrCloseList(this)">@topic.Name</a>
                    </td>
                    <td>
                        <a class="topicHeader"  onclick="confirmDelete('topicId', @topic.Id, '/Links/DeleteTopic/')">Удалить</a>
                    </td>
                </tr>
            </table>

            <ul class="linkList" style="@(topic.IsOpen ? "" : "display: none")">
                @foreach (var link in topic.Links)
                {
                    <li>
                        <table>
                            <tr>
                                <td>
                                    <a target="_blank" href="@link.Content">@link.Name</a>
                                </td>
                                <td>
                                    <a class="topicHeader"  onclick="confirmDelete('linkId', @link.Id, '/Links/DeleteLink/')">Удалить</a>
                                </td>
                            </tr>
                        </table>
                    </li>
                    <br />
                }
                    <form method="post" action="~/Links/AddLink/">
                        <input type="hidden" value="@topic.Id" name="id" />
                        <table>
                            <tr>
                                <td><p>Содержимое ссылки </p></td>
                                <td><input type="text" name="linkName" /> </td>
                            </tr>
                            <tr>
                                <td><p>Адрес </p></td>
                                <td><input type="text" name="linkContent" /> </td>
                            </tr>
                            <tr>
                                <td><input type="submit" value="Добавить ссылку" /> </td>
                                <td></td>
                            </tr>
                        </table>
                    </form>
            </ul>
        </div>

    }
</div>
<br/>
<form method="post" action="~/Links/AddTopic/@ViewBag.SubjectId">
    <input type="text" name="topicName"/>
    <input type="submit" value="Добавить тему"/>
</form>



